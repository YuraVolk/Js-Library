const data={BUTTON_CLASS:"calculator__btn",BUTTON_FRACTION:"calculator__btn--fraction",BUTTON_PLUS:"calculator__btn--plus",BUTTON_MINUS:"calculator__btn--minus",BUTTON_MULTIPLY:"calculator__btn--multiply",BUTTON_DIVIDE:"calculator__btn--divide",BUTTON_MODULUS:"calculator__btn--modulus",BUTTON_SQUARE:"calculator__btn--sqr",BUTTON_SQUARE_ROOT:"calculator__btn--square",BUTTON_C:"calculator__btn--c",BUTTON_CE:"calculator__btn--ce",BUTTON_NEGATE:"calculator__btn--plusminus",BUTTON_PARTIAL:"calculator__btn--partial",BUTTON_DELETE_SYMBOL:"calculator__btn--delete",BUTTON_EQUAL:"calculator__btn--equal",RESULT:"calculator__result"};let operations=["0"],res="0",curNum=0,element=document.querySelector(`.${data.RESULT}`);const formatNumber=function(){if(res){let t=res.toString().replace(/Math.sqrt/g,"√");return t=t.replace(/,2/g,"²"),t=t.replace(/Math.pow/g,""),t=t.replace(/\//g,"÷"),t=t.replace(/\*/g,"×"),t=t.replace(/(\d)(?=(\d{3})+(?!\d))/g,"$1,"),t}};function renderNum(t){"0"===operations[curNum]&&(operations[curNum]=""),operations[curNum-1]&&("0"===t[t.length-1]&&"/"===operations[curNum-1]||")"===operations[curNum-1])||(operations[curNum]+=t[t.length-1])}function addFraction(){operations[curNum].indexOf(".")>-1||(operations[curNum]+=".")}function changePosNeg(){operations[curNum].indexOf("-")>-1?operations[curNum]=Math.abs(operations[curNum]).toString():operations[curNum]=(-Math.abs(operations[curNum])).toString()}function insertSymbol(t){curNum++,operations[curNum]=t,curNum++,operations[curNum]=""}function addSymbol(t){operations.length>1&&(isNaN(operations[operations.length-1])||0===operations[operations.length-1].length)?")"===operations[curNum-1]&&insertSymbol(t):insertSymbol(t)}function evaluateEquation(){if(operations.length>1){let t;return"number"!=typeof operations[operations.length-2]&&0===operations[operations.length-1].length&&(operations[operations.length-2].indexOf(")")>-1||operations.splice(-2,1)),0===operations[operations.length-1].length&&operations.pop(),curNum=0,t=new Function("return "+operations.join(" "))(),operations.length=0,operations=[t+""],t}}function removeSymbol(){operations[curNum].length>0&&(operations[curNum]=operations[curNum].slice(0,-1),""===operations[curNum]&&(operations[curNum]="0"))}function addPrefix(t,o=""){("1 / "!==t||"0"!==operations[curNum]&&0!==evaluateEquation())&&function(a){a.includes(operations[curNum-1])&&0===operations[curNum].length&&operations.splice(-2,1),operations.splice(operations[curNum-1],0,t+"("),operations.push(o+")"),""!==operations[operations.length-1]&&operations.push(""),curNum=operations.length-1}(["+","-","*","%","/"])}document.addEventListener("click",(t=>{if(t.target.classList[0]===data.BUTTON_CLASS){const o=t.target.classList[1];isNaN(o[o.length-1])||renderNum(o),o===data.BUTTON_FRACTION&&addFraction(),o===data.BUTTON_PLUS&&addSymbol("+"),o===data.BUTTON_MINUS&&addSymbol("-"),o===data.BUTTON_MULTIPLY&&addSymbol("*"),o===data.BUTTON_DIVIDE&&addSymbol("/"),o===data.BUTTON_MODULUS&&addSymbol("%"),o===data.BUTTON_NEGATE&&changePosNeg(),o===data.BUTTON_SQUARE_ROOT&&addPrefix("Math.sqrt"),o===data.BUTTON_SQUARE&&addPrefix("Math.pow",",2"),o===data.BUTTON_PARTIAL&&addPrefix("1 / "),o===data.BUTTON_DELETE_SYMBOL&&removeSymbol(),o===data.BUTTON_C&&(curNum=0,operations=["0"]),o===data.BUTTON_CE&&(operations[curNum]="0"),res=operations.join(" "),o===data.BUTTON_EQUAL&&(res=evaluateEquation()),element.textContent=formatNumber()}}));